---
description: 並列サブエージェントでコンテキスト消費実験を実行
allowed-tools: Bash, Read, Write, Edit, Task
---

# 並列実験実行

`context-experiment-runner` サブエージェントを使用して実験を並列実行します。各試行は独立したエージェントで実行されるため、コンテキストが分離されます。

## 使い方

ユーザーから以下のパラメータを確認してください：

1. **コンテキストレベル**: `30%`, `50%`, `80%`, `90%` のいずれか（または全て）
2. **並列度**: 同時に実行するエージェント数（推奨: 5-10）
3. **試行範囲**: 開始番号と終了番号（1-100）

## 実行手順

### 1. サブエージェントの起動方法

Task ツールを使用して、`subagent_type: "context-experiment-runner"` で起動します。

**重要**: 複数のエージェントを**1つのメッセージで同時に**起動することで並列実行を実現します。

各エージェントへのプロンプト例：

```
コンテキストレベル "30%" で試行番号 1-10 を実行してください。

実行コマンド:
cd /path/to/project && python scripts/experiment_runner.py --batch --level "30%" --batch-start 1 --batch-end 10

結果は results/trial_30%_XXX.json に保存されます。
```

### 2. 並列実行パターン

**例：100試行を10並列で実行**

10個の `context-experiment-runner` エージェントを同時起動し、各エージェントが10試行ずつ担当：

- エージェント1: 試行1-10
- エージェント2: 試行11-20
- エージェント3: 試行21-30
- ...
- エージェント10: 試行91-100

### 3. 結果の集計

全試行完了後、結果を集計：

```bash
python scripts/analyze_results.py
```

## 注意事項

- 各サブエージェントは独立したコンテキストを持つため、実験の目的に合致
- 結果は `results/trial_*.json` に個別保存される
- APIレート制限に注意して並列度を調整
- 推奨: 1エージェントあたり10試行のバッチ実行
